<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Test - InvestWise Pro</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.1/jspdf.plugin.autotable.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #3b82f6, #9333ea);
            color: white;
            min-height: 100vh;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        button {
            background: #10b981;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
            transition: background 0.3s;
        }
        button:hover {
            background: #059669;
        }
        .pdf-info {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        .feature-list li:before {
            content: "‚úÖ ";
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìÑ InvestWise Pro PDF Test</h1>
        
        <div class="test-section">
            <h2>üéØ PDF Generation Test</h2>
            <p>Click the buttons below to test different PDF report types:</p>
            
            <button onclick="generateSimplePDF()">üìã Simple Report</button>
            <button onclick="generateDetailedPDF()">üìä Detailed Report</button>
            <button onclick="generateExecutivePDF()">üèÜ Executive Report</button>
        </div>
        
        <div class="pdf-info">
            <h3>üìÑ PDF Features:</h3>
            <ul class="feature-list">
                <li>App-style gradient background (blue to purple)</li>
                <li>Professional header with InvestWise Pro branding</li>
                <li>ROI highlight card with color-coded performance</li>
                <li>Comprehensive summary tables</li>
                <li>Performance rating indicators</li>
                <li>Professional footer with branding</li>
                <li>Three different report types (Simple, Detailed, Executive)</li>
                <li>Color-coded ROI performance (Green/Blue/Yellow/Red)</li>
                <li>Emoji icons for better visual appeal</li>
                <li>Proper spacing and layout to prevent text overlap</li>
            </ul>
        </div>
        
        <div class="test-section">
            <h3>üîß Technical Details:</h3>
            <p><strong>Libraries:</strong> jsPDF + jspdf-autotable</p>
            <p><strong>Design:</strong> Matches InvestWise Pro app UI</p>
            <p><strong>Fallback:</strong> Frontend generation if backend fails</p>
            <p><strong>Types:</strong> Simple, Detailed, Executive reports</p>
        </div>
    </div>

    <script>
        // Sample calculation data
        const sampleData = {
            initial_investment: 10000,
            additional_costs: 0,
            total_investment: 10000,
            net_profit: 2650,
            expected_return: 12650,
            roi_percentage: 26.5,
            effective_tax_rate: 21,
            tax_amount: 557,
            after_tax_profit: 2094,
            scenario_name: 'Restaurant',
            mini_scenario_name: 'Catering Service',
            country_code: 'US',
            calculation_method: 'local_fallback'
        };

        function generateSimplePDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Set document properties
            doc.setProperties({
                title: 'InvestWise Pro - ROI Investment Report',
                subject: 'Investment Analysis',
                author: 'InvestWise Pro',
                creator: 'InvestWise Pro ROI Calculator'
            });

            // App-style gradient background (blue to purple)
            doc.setFillColor(37, 99, 235); // Blue-600
            doc.rect(0, 0, 210, 297, 'F');
            
            // Gradient overlay
            doc.setFillColor(147, 51, 234); // Purple-600
            doc.rect(0, 0, 210, 297, 'F');
            
            // Header with app branding
            doc.setFillColor(255, 255, 255);
            doc.rect(0, 0, 210, 60, 'F');
            
            doc.setFontSize(28);
            doc.setTextColor(37, 99, 235);
            doc.text('InvestWise Pro', 105, 30, { align: 'center' });
            
            doc.setFontSize(16);
            doc.setTextColor(147, 51, 234);
            doc.text('ROI Investment Report', 105, 45, { align: 'center' });

            // ROI Highlight Card (app-style)
            doc.setFillColor(255, 255, 255);
            doc.rect(20, 80, 170, 50, 'F');
            doc.setDrawColor(255, 255, 255);
            doc.rect(20, 80, 170, 50, 'S');
            
            doc.setFontSize(24);
            doc.setTextColor(16, 185, 129); // Green for positive ROI
            doc.text(`${sampleData.roi_percentage.toFixed(2)}% ROI`, 105, 100, { align: 'center' });
            doc.setFontSize(12);
            doc.setTextColor(255, 255, 255);
            doc.text(`on $${sampleData.total_investment.toLocaleString()} investment`, 105, 115, { align: 'center' });

            // Summary table
            const summaryData = [
                ['üí∞ Initial Investment', `$${sampleData.initial_investment.toLocaleString()}`],
                ['üí∏ Additional Costs', `$${sampleData.additional_costs.toLocaleString()}`],
                ['üíµ Net Profit', `$${sampleData.net_profit.toLocaleString()}`],
                ['üìà Expected Return', `$${sampleData.expected_return.toLocaleString()}`],
                ['üè¢ Business Scenario', sampleData.scenario_name],
                ['üéØ Mini Scenario', sampleData.mini_scenario_name],
                ['üåç Country', sampleData.country_code],
                ['üìã Calculation Method', sampleData.calculation_method]
            ];
            
            doc.autoTable({
                startY: 150,
                head: [['Metric', 'Value']],
                body: summaryData,
                theme: 'plain',
                headStyles: { 
                    fillColor: [255, 255, 255], 
                    textColor: [255, 255, 255],
                    fontSize: 12,
                    fontStyle: 'bold'
                },
                styles: { 
                    fontSize: 11,
                    cellPadding: 8,
                    textColor: [255, 255, 255]
                },
                alternateRowStyles: {
                    fillColor: [255, 255, 255]
                },
                margin: { left: 20, right: 20 }
            });

            // Performance indicator
            const performanceY = 240;
            doc.setFillColor(255, 255, 255);
            doc.rect(20, performanceY - 5, 170, 30, 'F');
            doc.setDrawColor(255, 255, 255);
            doc.rect(20, performanceY - 5, 170, 30, 'S');
            
            doc.setFontSize(14);
            doc.setTextColor(255, 255, 255);
            doc.text('Performance Rating:', 25, performanceY + 8);
            
            let rating = '';
            let ratingColor = [255, 255, 255];
            if (sampleData.roi_percentage >= 20) {
                rating = '‚≠ê EXCELLENT';
                ratingColor = [16, 185, 129];
            } else if (sampleData.roi_percentage >= 10) {
                rating = '‚≠ê GOOD';
                ratingColor = [59, 130, 246];
            } else if (sampleData.roi_percentage >= 0) {
                rating = '‚≠ê FAIR';
                ratingColor = [245, 158, 11];
            } else {
                rating = '‚≠ê POOR';
                ratingColor = [239, 68, 68];
            }
            
            doc.setFontSize(12);
            doc.setTextColor(ratingColor[0], ratingColor[1], ratingColor[2]);
            doc.text(rating, 25, performanceY + 20);

            // App-style footer
            doc.setFillColor(255, 255, 255);
            doc.rect(0, 280, 210, 17, 'F');
            
            doc.setFontSize(10);
            doc.setTextColor(255, 255, 255);
            doc.text('Generated by InvestWise Pro ROI Calculator', 105, 288, { align: 'center' });
            doc.text('Professional Investment Analysis Tool', 105, 295, { align: 'center' });
            
            // Save the PDF
            const filename = `investwise_pro_simple_report_${new Date().toISOString().split('T')[0]}.pdf`;
            doc.save(filename);
            
            alert('‚úÖ Simple PDF generated successfully!');
        }

        function generateDetailedPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Set document properties
            doc.setProperties({
                title: 'InvestWise Pro - Detailed Investment Analysis',
                subject: 'Comprehensive Investment Analysis',
                author: 'InvestWise Pro',
                creator: 'InvestWise Pro ROI Calculator'
            });

            // App-style gradient background
            doc.setFillColor(37, 99, 235); // Blue-600
            doc.rect(0, 0, 210, 297, 'F');
            
            // Gradient overlay
            doc.setFillColor(147, 51, 234); // Purple-600
            doc.rect(0, 0, 210, 297, 'F');
            
            // Header with app branding
            doc.setFillColor(255, 255, 255);
            doc.rect(0, 0, 210, 70, 'F');
            
            doc.setFontSize(28);
            doc.setTextColor(37, 99, 235);
            doc.text('InvestWise Pro', 105, 35, { align: 'center' });
            
            doc.setFontSize(18);
            doc.setTextColor(147, 51, 234);
            doc.text('Detailed Investment Analysis', 105, 50, { align: 'center' });

            // Investment Summary Section
            doc.setFontSize(16);
            doc.setTextColor(255, 255, 255);
            doc.text('üí∞ Investment Summary', 20, 90);
            
            const investmentData = [
                ['üíµ Initial Investment', `$${sampleData.initial_investment.toLocaleString()}`],
                ['üí∏ Additional Costs', `$${sampleData.additional_costs.toLocaleString()}`],
                ['üí∞ Total Investment', `$${sampleData.total_investment.toLocaleString()}`],
                ['üìä Investment Type', sampleData.total_investment >= 100000 ? 'Large Scale' : sampleData.total_investment >= 25000 ? 'Medium Scale' : 'Small Scale']
            ];
            
            doc.autoTable({
                startY: 100,
                head: [['Item', 'Amount']],
                body: investmentData,
                theme: 'plain',
                headStyles: { 
                    fillColor: [255, 255, 255], 
                    textColor: [255, 255, 255],
                    fontSize: 11,
                    fontStyle: 'bold'
                },
                styles: { 
                    fontSize: 10,
                    cellPadding: 6,
                    textColor: [255, 255, 255]
                },
                alternateRowStyles: {
                    fillColor: [255, 255, 255]
                },
                margin: { left: 20, right: 20 }
            });

            // ROI Performance Section
            doc.setFontSize(16);
            doc.setTextColor(255, 255, 255);
            doc.text('üìà ROI Performance', 20, 160);
            
            const roiData = [
                ['üìä ROI Percentage', `${sampleData.roi_percentage.toFixed(2)}%`],
                ['üíµ Net Profit', `$${sampleData.net_profit.toLocaleString()}`],
                ['üéØ Expected Return', `$${sampleData.expected_return.toLocaleString()}`],
                ['üìà Performance', sampleData.roi_percentage >= 20 ? 'Excellent' : sampleData.roi_percentage >= 10 ? 'Good' : sampleData.roi_percentage >= 0 ? 'Fair' : 'Poor']
            ];
            
            doc.autoTable({
                startY: 170,
                head: [['Metric', 'Value']],
                body: roiData,
                theme: 'plain',
                headStyles: { 
                    fillColor: [255, 255, 255], 
                    textColor: [255, 255, 255],
                    fontSize: 11,
                    fontStyle: 'bold'
                },
                styles: { 
                    fontSize: 10,
                    cellPadding: 6,
                    textColor: [255, 255, 255]
                },
                alternateRowStyles: {
                    fillColor: [255, 255, 255]
                },
                margin: { left: 20, right: 20 }
            });

            // Business Information Section
            doc.setFontSize(16);
            doc.setTextColor(255, 255, 255);
            doc.text('üè¢ Business Information', 20, 220);
            
            const businessData = [
                ['üè≠ Scenario', sampleData.scenario_name],
                ['üéØ Mini Scenario', sampleData.mini_scenario_name],
                ['üåç Country', sampleData.country_code],
                ['üìã Calculation Method', sampleData.calculation_method]
            ];
            
            doc.autoTable({
                startY: 230,
                head: [['Detail', 'Value']],
                body: businessData,
                theme: 'plain',
                headStyles: { 
                    fillColor: [255, 255, 255], 
                    textColor: [255, 255, 255],
                    fontSize: 11,
                    fontStyle: 'bold'
                },
                styles: { 
                    fontSize: 10,
                    cellPadding: 6,
                    textColor: [255, 255, 255]
                },
                alternateRowStyles: {
                    fillColor: [255, 255, 255]
                },
                margin: { left: 20, right: 20 }
            });

            // Tax Analysis Section
            doc.addPage();
            
            // Second page header
            doc.setFillColor(37, 99, 235);
            doc.rect(0, 0, 210, 297, 'F');
            doc.setFillColor(147, 51, 234);
            doc.rect(0, 0, 210, 297, 'F');
            
            doc.setFontSize(16);
            doc.setTextColor(255, 255, 255);
            doc.text('üí∏ Tax Analysis', 20, 30);
            
            const taxData = [
                ['üìä Effective Tax Rate', `${sampleData.effective_tax_rate.toFixed(1)}%`],
                ['üí∏ Tax Amount', `$${sampleData.tax_amount.toLocaleString()}`],
                ['üíµ After-Tax Profit', `$${sampleData.after_tax_profit.toLocaleString()}`],
                ['üìà Tax Impact', `${((sampleData.tax_amount / sampleData.net_profit) * 100).toFixed(1)}% of profit`]
            ];
            
            doc.autoTable({
                startY: 40,
                head: [['Tax Item', 'Amount']],
                body: taxData,
                theme: 'plain',
                headStyles: { 
                    fillColor: [255, 255, 255], 
                    textColor: [255, 255, 255],
                    fontSize: 11,
                    fontStyle: 'bold'
                },
                styles: { 
                    fontSize: 10,
                    cellPadding: 6,
                    textColor: [255, 255, 255]
                },
                alternateRowStyles: {
                    fillColor: [255, 255, 255]
                },
                margin: { left: 20, right: 20 }
            });

            // Risk Assessment
            doc.setFontSize(16);
            doc.setTextColor(255, 255, 255);
            doc.text('‚ö†Ô∏è Risk Assessment', 20, 100);
            
            let riskLevel = '';
            let riskColor = [255, 255, 255];
            if (sampleData.roi_percentage >= 20) {
                riskLevel = 'üü¢ LOW RISK - Excellent potential';
                riskColor = [16, 185, 129];
            } else if (sampleData.roi_percentage >= 10) {
                riskLevel = 'üü° MODERATE RISK - Good potential';
                riskColor = [245, 158, 11];
            } else if (sampleData.roi_percentage >= 0) {
                riskLevel = 'üü† HIGH RISK - Fair potential';
                riskColor = [251, 146, 60];
            } else {
                riskLevel = 'üî¥ VERY HIGH RISK - Poor potential';
                riskColor = [239, 68, 68];
            }
            
            doc.setFontSize(11);
            doc.setTextColor(riskColor[0], riskColor[1], riskColor[2]);
            doc.text(riskLevel, 20, 115);

            // App-style footer
            doc.setFillColor(255, 255, 255);
            doc.rect(0, 280, 210, 17, 'F');
            
            doc.setFontSize(9);
            doc.setTextColor(255, 255, 255);
            doc.text('Generated by InvestWise Pro ROI Calculator', 105, 288, { align: 'center' });
            doc.text('Professional Investment Analysis Tool', 105, 295, { align: 'center' });

            const filename = `investwise_pro_detailed_report_${new Date().toISOString().split('T')[0]}.pdf`;
            doc.save(filename);
            
            alert('‚úÖ Detailed PDF generated successfully!');
        }

        function generateExecutivePDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Set document properties
            doc.setProperties({
                title: 'InvestWise Pro - Executive Summary',
                subject: 'Executive Investment Analysis',
                author: 'InvestWise Pro',
                creator: 'InvestWise Pro ROI Calculator'
            });

            // App-style gradient background
            doc.setFillColor(37, 99, 235); // Blue-600
            doc.rect(0, 0, 210, 297, 'F');
            
            // Gradient overlay
            doc.setFillColor(147, 51, 234); // Purple-600
            doc.rect(0, 0, 210, 297, 'F');
            
            // Header with app branding
            doc.setFillColor(255, 255, 255);
            doc.rect(0, 0, 210, 80, 'F');
            
            doc.setFontSize(28);
            doc.setTextColor(37, 99, 235);
            doc.text('InvestWise Pro', 105, 40, { align: 'center' });
            
            doc.setFontSize(20);
            doc.setTextColor(147, 51, 234);
            doc.text('Executive Summary', 105, 55, { align: 'center' });

            // Executive Summary Card
            doc.setFillColor(255, 255, 255);
            doc.rect(20, 95, 170, 60, 'F');
            doc.setDrawColor(255, 255, 255);
            doc.rect(20, 95, 170, 60, 'S');
            
            doc.setFontSize(20);
            doc.setTextColor(16, 185, 129); // Green for positive ROI
            doc.text(`${sampleData.roi_percentage.toFixed(2)}% ROI`, 105, 115, { align: 'center' });
            doc.setFontSize(12);
            doc.setTextColor(255, 255, 255);
            doc.text(`on $${sampleData.total_investment.toLocaleString()} investment`, 105, 130, { align: 'center' });
            doc.text(`Net Profit: $${sampleData.net_profit.toLocaleString()}`, 105, 145, { align: 'center' });

            // Executive Summary Table
            const executiveData = [
                ['üí∞ Investment Amount', `$${sampleData.total_investment.toLocaleString()}`],
                ['üìà ROI Performance', `${sampleData.roi_percentage.toFixed(2)}%`],
                ['üíµ Net Profit', `$${sampleData.net_profit.toLocaleString()}`],
                ['üéØ Expected Return', `$${sampleData.expected_return.toLocaleString()}`],
                ['üè¢ Business Type', sampleData.scenario_name],
                ['üåç Market', sampleData.country_code],
                ['üìä Tax Rate', `${sampleData.effective_tax_rate}%`],
                ['üí∏ After-Tax Profit', `$${sampleData.after_tax_profit.toLocaleString()}`]
            ];
            
            doc.autoTable({
                startY: 175,
                head: [['Metric', 'Value']],
                body: executiveData,
                theme: 'plain',
                headStyles: { 
                    fillColor: [255, 255, 255], 
                    textColor: [255, 255, 255],
                    fontSize: 12,
                    fontStyle: 'bold'
                },
                styles: { 
                    fontSize: 11,
                    cellPadding: 8,
                    textColor: [255, 255, 255]
                },
                alternateRowStyles: {
                    fillColor: [255, 255, 255]
                },
                margin: { left: 20, right: 20 }
            });

            // Investment Assessment
            doc.addPage();
            
            // Second page header
            doc.setFillColor(37, 99, 235);
            doc.rect(0, 0, 210, 297, 'F');
            doc.setFillColor(147, 51, 234);
            doc.rect(0, 0, 210, 297, 'F');
            
            doc.setFillColor(255, 255, 255);
            doc.rect(0, 0, 210, 40, 'F');
            
            doc.setFontSize(20);
            doc.setTextColor(37, 99, 235);
            doc.text('InvestWise Pro', 105, 20, { align: 'center' });
            
            doc.setFontSize(14);
            doc.setTextColor(147, 51, 234);
            doc.text('Investment Assessment & Analysis', 105, 30, { align: 'center' });

            // Investment Assessment
            doc.setFontSize(16);
            doc.setTextColor(255, 255, 255);
            doc.text('üìã Investment Assessment', 20, 60);
            
            let recommendation = '';
            let recommendationColor = [255, 255, 255];
            let confidence = '';
            let confidenceColor = [255, 255, 255];
            
            if (sampleData.roi_percentage >= 20) {
                recommendation = 'üèÜ EXCELLENT - High potential investment';
                recommendationColor = [16, 185, 129];
                confidence = 'Very High Confidence';
                confidenceColor = [16, 185, 129];
            } else if (sampleData.roi_percentage >= 10) {
                recommendation = '‚úÖ GOOD - Solid investment opportunity';
                recommendationColor = [59, 130, 246];
                confidence = 'High Confidence';
                confidenceColor = [59, 130, 246];
            } else if (sampleData.roi_percentage >= 0) {
                recommendation = '‚ö†Ô∏è FAIR - Moderate risk/reward';
                recommendationColor = [245, 158, 11];
                confidence = 'Medium Confidence';
                confidenceColor = [245, 158, 11];
            } else {
                recommendation = '‚ùå POOR - High risk, low return';
                recommendationColor = [239, 68, 68];
                confidence = 'Low Confidence';
                confidenceColor = [239, 68, 68];
            }
            
            doc.setFontSize(12);
            doc.setTextColor(recommendationColor[0], recommendationColor[1], recommendationColor[2]);
            doc.text(recommendation, 20, 80);
            
            doc.setFontSize(10);
            doc.setTextColor(confidenceColor[0], confidenceColor[1], confidenceColor[2]);
            doc.text(`Confidence Level: ${confidence}`, 20, 90);
            
            doc.setFontSize(10);
            doc.setTextColor(255, 255, 255);
            doc.text(`Based on ${sampleData.roi_percentage.toFixed(2)}% ROI analysis`, 20, 100);

            // Market Analysis Section
            doc.setFontSize(16);
            doc.setTextColor(255, 255, 255);
            doc.text('üìà Market Analysis', 20, 125);
            
            const marketInsights = [
                `‚Ä¢ Investment Size: ${sampleData.total_investment >= 100000 ? 'Large Scale' : sampleData.total_investment >= 25000 ? 'Medium Scale' : 'Small Scale'}`,
                `‚Ä¢ ROI Performance: ${sampleData.roi_percentage >= 20 ? 'Above Market Average' : sampleData.roi_percentage >= 10 ? 'Market Average' : 'Below Market Average'}`,
                `‚Ä¢ Risk Profile: ${sampleData.roi_percentage >= 20 ? 'Low Risk' : sampleData.roi_percentage >= 10 ? 'Moderate Risk' : 'High Risk'}`,
                `‚Ä¢ Tax Efficiency: ${sampleData.effective_tax_rate <= 20 ? 'Tax Efficient' : 'Standard Tax Impact'}`
            ];
            
            doc.setFontSize(10);
            doc.setTextColor(255, 255, 255);
            marketInsights.forEach((insight, index) => {
                doc.text(insight, 20, 145 + (index * 8));
            });

            // App-style footer
            doc.setFillColor(255, 255, 255);
            doc.rect(0, 280, 210, 17, 'F');
            
            doc.setFontSize(9);
            doc.setTextColor(255, 255, 255);
            doc.text('Generated by InvestWise Pro ROI Calculator', 105, 288, { align: 'center' });
            doc.text('Professional Investment Analysis Tool', 105, 295, { align: 'center' });

            const filename = `investwise_pro_executive_report_${new Date().toISOString().split('T')[0]}.pdf`;
            doc.save(filename);
            
            alert('‚úÖ Executive PDF generated successfully!');
        }
    </script>
</body>
</html>