import{m as j,j as e}from"./index-eabc213b.js";import{r as u}from"./vendor-fb33f09a.js";import{A as E}from"./AdminMenu-9eff1678.js";import{a as S}from"./router-c6dabb7d.js";import{a9 as $,h as G,U as B,q as p,l as I,T as O,aa as J,ab as F,ac as P,r as q}from"./ui-a90daba1.js";const V=()=>{const N=S(),[r,v]=u.useState({totalUsers:0,activeUsers:0,totalCalculations:0,totalExports:0,growthRate:0,monthlyGrowth:0,conversionRate:0,averageSessionTime:0,bounceRate:0}),[b,y]=u.useState([]),[w,A]=u.useState(!1);u.useEffect(()=>{U(),D()},[]);const U=()=>{try{const s=j.getAllUsers(),d=j.getActiveUsers(),x=s.reduce((i,m)=>i+m.totalCalculations,0),n=s.reduce((i,m)=>i+m.totalExports,0),c=new Date,o=new Date(c.getTime()-30*24*60*60*1e3),g=new Date(c.getTime()-60*24*60*60*1e3),a=s.filter(i=>new Date(i.registrationDate)>o),l=s.filter(i=>{const m=new Date(i.registrationDate);return m>g&&m<=o}),t=l.length>0?(a.length-l.length)/l.length*100:a.length>0?100:0,h=t,k=s.length>0?d.length/s.length*100:0,f=s.filter(i=>i.totalCalculations>0||i.totalExports>0),T=f.length>0?Math.round((x+n)/f.length*2.5):0,C=s.filter(i=>i.totalCalculations===0&&i.totalExports===0),z=s.length>0?C.length/s.length*100:0;v({totalUsers:s.length,activeUsers:d.length,totalCalculations:x,totalExports:n,growthRate:Math.round(t*10)/10,monthlyGrowth:Math.round(h*10)/10,conversionRate:Math.round(k*10)/10,averageSessionTime:Math.round(T*10)/10,bounceRate:Math.round(z*10)/10})}catch(s){console.error("Failed to load analytics data:",s)}},D=()=>{try{const s=[],d=Date.now(),n=j.getAllUsers().filter(a=>new Date(a.registrationDate)>new Date(d-7*24*60*60*1e3)).map(a=>({id:`reg-${a.id}`,type:"registration",description:`New user registration: ${a.name}`,timestamp:new Date(a.registrationDate).getTime(),user:a.name,color:"bg-green-400"})).sort((a,l)=>l.timestamp-a.timestamp).slice(0,3);s.push(...n);const c=localStorage.getItem("adminChatMessages");if(c){const l=JSON.parse(c).filter(t=>new Date(t.timestamp)>new Date(d-24*60*60*1e3)).map(t=>({id:`chat-${t.id}`,type:"chat",description:`Chat message from ${t.userName}`,timestamp:new Date(t.timestamp).getTime(),user:t.userName,color:"bg-yellow-400"})).sort((t,h)=>h.timestamp-t.timestamp).slice(0,3);s.push(...l)}const o=localStorage.getItem("databaseBackups");if(o){const l=JSON.parse(o).filter(t=>t.timestamp>d-7*24*60*60*1e3).map(t=>({id:`backup-${t.backupId}`,type:"backup",description:"System backup completed",timestamp:t.timestamp,color:"bg-orange-400"})).sort((t,h)=>h.timestamp-t.timestamp).slice(0,2);s.push(...l)}const g=s.sort((a,l)=>l.timestamp-a.timestamp).slice(0,8);y(g)}catch(s){console.error("Failed to load recent activity:",s)}},M=s=>{const x=Date.now()-s,n=Math.floor(x/(1e3*60)),c=Math.floor(x/(1e3*60*60)),o=Math.floor(x/(1e3*60*60*24));return n<1?"Just now":n<60?`${n} minute${n>1?"s":""} ago`:c<24?`${c} hour${c>1?"s":""} ago`:`${o} day${o>1?"s":""} ago`},R=s=>{switch(s){case"registration":return e.jsx(q,{size:16});case"chat":return e.jsx(P,{size:16});case"backup":return e.jsx(F,{size:16});case"login":return e.jsx(p,{size:16});default:return e.jsx(p,{size:16})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:[e.jsx(E,{isOpen:w,onToggle:()=>A(!w)}),e.jsx("div",{className:"bg-white/10 backdrop-blur-xl border-b border-white/20 lg:ml-64",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("button",{onClick:()=>N("/admin"),className:"flex items-center space-x-2 text-white/80 hover:text-white transition-colors",children:[e.jsx($,{size:20}),e.jsx("span",{children:"Back to Dashboard"})]})}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center space-x-2",children:[e.jsx(G,{size:28}),e.jsx("span",{children:"Analytics"})]})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 lg:ml-64",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-sm font-medium",children:"Total Users"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:r.totalUsers})]}),e.jsx("div",{className:"bg-blue-500/20 p-3 rounded-xl",children:e.jsx(B,{className:"text-blue-400",size:24})})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-sm font-medium",children:"Active Users"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:r.activeUsers})]}),e.jsx("div",{className:"bg-green-500/20 p-3 rounded-xl",children:e.jsx(p,{className:"text-green-400",size:24})})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-sm font-medium",children:"Total Calculations"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:r.totalCalculations})]}),e.jsx("div",{className:"bg-purple-500/20 p-3 rounded-xl",children:e.jsx(I,{className:"text-purple-400",size:24})})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-sm font-medium",children:"User Engagement"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:r.totalCalculations+r.totalExports})]}),e.jsx("div",{className:"bg-yellow-500/20 p-3 rounded-xl",children:e.jsx(p,{className:"text-yellow-400",size:24})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20",children:[e.jsxs("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center space-x-2",children:[e.jsx(O,{size:20}),e.jsx("span",{children:"Growth Metrics"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-white/80",children:"Growth Rate"}),e.jsxs("span",{className:"text-green-400 font-semibold",children:["+",r.growthRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-white/80",children:"Monthly Growth"}),e.jsxs("span",{className:"text-green-400 font-semibold",children:["+",r.monthlyGrowth,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-white/80",children:"Conversion Rate"}),e.jsxs("span",{className:"text-blue-400 font-semibold",children:[r.conversionRate,"%"]})]})]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20",children:[e.jsxs("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center space-x-2",children:[e.jsx(J,{size:20}),e.jsx("span",{children:"User Engagement"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-white/80",children:"Avg Session Time"}),e.jsxs("span",{className:"text-purple-400 font-semibold",children:[r.averageSessionTime," min"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-white/80",children:"Bounce Rate"}),e.jsxs("span",{className:"text-red-400 font-semibold",children:[r.bounceRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-white/80",children:"Total Exports"}),e.jsx("span",{className:"text-yellow-400 font-semibold",children:r.totalExports})]})]})]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Recent Analytics Activity"}),e.jsx("div",{className:"space-y-3",children:b.length>0?b.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-2 h-2 ${s.color} rounded-full`}),e.jsxs("div",{className:"flex items-center space-x-2",children:[R(s.type),e.jsx("span",{className:"text-white/80",children:s.description})]})]}),e.jsx("span",{className:"text-white/60 text-sm",children:M(s.timestamp)})]},s.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(p,{className:"mx-auto text-white/40",size:48}),e.jsx("p",{className:"text-white/60 mt-2",children:"No recent activity"}),e.jsx("p",{className:"text-white/40 text-sm",children:"Activity will appear here as users interact with the application"})]})})]})]})]})};export{V as default};
//# sourceMappingURL=AdminAnalytics-cfee517e.js.map
