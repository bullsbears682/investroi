{"version":3,"file":"AdminDashboard-ff39fbbf.js","sources":["../../src/pages/AdminDashboard.tsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport AdminMenu from '../components/AdminMenu';\nimport {\n  AnalyticsIcon,\n  UsersIcon,\n  MessageSquareIcon,\n  CodeIcon,\n} from '../components/icons/CustomIcons';\nimport { userManager } from '../utils/userManagement';\nimport { chatSystem } from '../utils/chatSystem';\nimport { contactStorage, type ContactSubmission } from '../utils/contactStorage';\n\ninterface MetricSummary {\n  totalUsers: number;\n  activeUsers: number;\n  totalCalculations: number;\n  totalExports: number;\n  contacts: number;\n  openChats: number;\n}\n\ninterface ActivityItem {\n  id: string;\n  type: 'registration' | 'chat' | 'backup' | 'export' | 'system';\n  description: string;\n  timestamp: number;\n  color: string;\n}\n\nconst formatUpdatedAgo = (lastUpdatedAt: number | null): string => {\n  if (!lastUpdatedAt) return '—';\n  const diff = Date.now() - lastUpdatedAt;\n  const seconds = Math.floor(diff / 1000);\n  if (seconds < 5) return 'just now';\n  if (seconds < 60) return `${seconds}s ago`;\n  const minutes = Math.floor(seconds / 60);\n  if (minutes < 60) return `${minutes}m ago`;\n  const hours = Math.floor(minutes / 60);\n  if (hours < 24) return `${hours}h ago`;\n  const days = Math.floor(hours / 24);\n  return `${days}d ago`;\n};\n\nconst AdminDashboard: React.FC = () => {\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [summary, setSummary] = useState<MetricSummary>({\n    totalUsers: 0,\n    activeUsers: 0,\n    totalCalculations: 0,\n    totalExports: 0,\n    contacts: 0,\n    openChats: 0,\n  });\n  const [recentActivity, setRecentActivity] = useState<ActivityItem[]>([]);\n  const [recentMessages, setRecentMessages] = useState<ContactSubmission[]>([]);\n  const [activityQuery, setActivityQuery] = useState('');\n  const [lastUpdatedAt, setLastUpdatedAt] = useState<number | null>(null);\n  const [isMaintenance, setIsMaintenance] = useState<boolean>(false);\n\n  const loadSummary = () => {\n    try {\n      const allUsers = userManager.getAllUsers();\n      const activeUsers = userManager.getActiveUsers();\n      const totalCalculations = allUsers.reduce((sum: number, u: any) => sum + (u.totalCalculations || 0), 0);\n      const totalExports = allUsers.reduce((sum: number, u: any) => sum + (u.totalExports || 0), 0);\n      const contacts = contactStorage.getSubmissions();\n      const openChats = (chatSystem.getAllSessions?.() || []).filter((s: any) => s.status !== 'closed').length;\n\n      setSummary({\n        totalUsers: allUsers.length,\n        activeUsers: activeUsers.length,\n        totalCalculations,\n        totalExports,\n        contacts: contacts.length,\n        openChats,\n      });\n    } catch (err) {\n      console.error('Failed to load admin summary:', err);\n    }\n  };\n\n  const loadRecentMessages = () => {\n    try {\n      setRecentMessages(contactStorage.getRecentSubmissions(5));\n    } catch (e) {\n      console.error('Failed to load recent messages', e);\n    }\n  };\n\n  const loadRecentActivity = () => {\n    try {\n      const items: ActivityItem[] = [];\n      const now = Date.now();\n      const users = userManager.getAllUsers();\n      users\n        .filter((u: any) => new Date(u.registrationDate).getTime() > now - 7 * 24 * 60 * 60 * 1000)\n        .slice(0, 5)\n        .forEach((u: any) =>\n          items.push({\n            id: `reg-${u.id}`,\n            type: 'registration',\n            description: `New user: ${u.name}`,\n            timestamp: new Date(u.registrationDate).getTime(),\n            color: 'bg-green-400',\n          })\n        );\n\n      const messages = JSON.parse(localStorage.getItem('chatMessages') || '[]');\n      messages\n        .filter((m: any) => new Date(m.timestamp).getTime() > now - 24 * 60 * 60 * 1000)\n        .slice(0, 5)\n        .forEach((m: any, idx: number) =>\n          items.push({\n            id: `chat-${m.id || idx}`,\n            type: 'chat',\n            description: `Chat from ${m.userName || 'User'}`,\n            timestamp: new Date(m.timestamp).getTime(),\n            color: 'bg-yellow-400',\n          })\n        );\n\n      items.sort((a, b) => b.timestamp - a.timestamp);\n      setRecentActivity(items.slice(0, 12));\n    } catch (err) {\n      console.error('Failed to load recent activity:', err);\n    }\n  };\n\n  const refreshAll = () => {\n    setLoading(true);\n    loadSummary();\n    loadRecentActivity();\n    loadRecentMessages();\n    setLastUpdatedAt(Date.now());\n    setIsMaintenance(localStorage.getItem('maintenance_mode') === 'true');\n    // ensure skeleton visible briefly\n    setTimeout(() => setLoading(false), 250);\n  };\n\n  useEffect(() => {\n    refreshAll();\n\n    const onStorage = (e: StorageEvent) => {\n      if (\n        e.key === 'registered_users' ||\n        e.key === 'contact_submissions' ||\n        e.key === 'chatMessages' ||\n        e.key === 'maintenance_mode'\n      ) {\n        loadSummary();\n        loadRecentActivity();\n        loadRecentMessages();\n        setIsMaintenance(localStorage.getItem('maintenance_mode') === 'true');\n        setLastUpdatedAt(Date.now());\n      }\n    };\n\n    const onContactsUpdated = () => {\n      loadSummary();\n      loadRecentMessages();\n      setLastUpdatedAt(Date.now());\n    };\n\n    window.addEventListener('storage', onStorage);\n    window.addEventListener('contact_submissions_updated', onContactsUpdated as EventListener);\n    const onCustom = () => setIsMaintenance(localStorage.getItem('maintenance_mode') === 'true');\n    window.addEventListener('maintenanceChanged' as any, onCustom as any);\n    return () => {\n      window.removeEventListener('storage', onStorage);\n      window.removeEventListener('contact_submissions_updated', onContactsUpdated as EventListener);\n      window.removeEventListener('maintenanceChanged' as any, onCustom as any);\n    };\n  }, []);\n\n  const filteredActivity = useMemo(() => {\n    const q = activityQuery.trim().toLowerCase();\n    if (!q) return recentActivity;\n    return recentActivity.filter((a) => a.description.toLowerCase().includes(q));\n  }, [recentActivity, activityQuery]);\n\n  const toggleMaintenance = () => {\n    const next = !isMaintenance;\n    localStorage.setItem('maintenance_mode', String(next));\n    setIsMaintenance(next);\n    window.dispatchEvent(new Event('maintenanceChanged'));\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-950 via-indigo-950 to-slate-900\">\n      <AdminMenu isOpen={isMenuOpen} onToggle={() => setIsMenuOpen(!isMenuOpen)} />\n\n      {/* Header */}\n      <div className=\"bg-white/10 backdrop-blur-xl border-b border-white/20 lg:ml-64\">\n        <div className=\"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8\">\n          <div className=\"flex items-center justify-between h-14 sm:h-16\">\n            <div className=\"flex items-center gap-3\">\n              <button\n                className=\"sm:hidden inline-flex items-center px-3 py-1.5 rounded-lg bg-white/10 border border-white/20 text-white text-sm\"\n                onClick={() => setIsMenuOpen(true)}\n                aria-label=\"Open admin menu\"\n              >Menu</button>\n              <h1 className=\"text-2xl font-bold text-white\">Admin Dashboard</h1>\n              <p className=\"hidden sm:block text-white/60 text-sm\">Overview, insights and admin tools</p>\n            </div>\n            <div className=\"hidden sm:flex gap-2\">\n              <Link to=\"/admin/analytics\" className=\"px-3 py-1.5 bg-white/10 hover:bg-white/20 border border-white/20 rounded-lg text-white text-sm\">Analytics</Link>\n              <Link to=\"/admin/data\" className=\"px-3 py-1.5 bg-white/10 hover:bg-white/20 border border-white/20 rounded-lg text-white text-sm\">Users</Link>\n              <Link to=\"/admin/system\" className=\"px-3 py-1.5 bg-white/10 hover:bg-white/20 border border-white/20 rounded-lg text-white text-sm\">System</Link>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-6 sm:py-8 lg:ml-64\">\n        {/* Toolbar */}\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-3 mb-4 sm:mb-6\">\n          <div className=\"text-white/60 text-sm\">Last updated <span className=\"text-white\">{formatUpdatedAgo(lastUpdatedAt)}</span></div>\n          <div className=\"flex items-center gap-2\">\n            <button\n              onClick={toggleMaintenance}\n              className={`inline-flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm border transition-colors ${isMaintenance ? 'bg-yellow-500/20 border-yellow-400/40 text-yellow-200 hover:bg-yellow-500/30' : 'bg-white/10 border-white/20 text-white hover:bg-white/20'}`}\n              aria-label=\"Toggle maintenance mode\"\n            >\n              {isMaintenance ? 'Disable Maintenance' : 'Enable Maintenance'}\n            </button>\n            <button\n              onClick={refreshAll}\n              className=\"inline-flex items-center gap-2 px-3 py-1.5 bg-white/10 hover:bg-white/20 border border-white/20 rounded-lg text-white text-sm\"\n              aria-label=\"Refresh dashboard\"\n            >\n              Refresh\n            </button>\n          </div>\n        </div>\n\n        {/* Stats */}\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8\">\n          {loading ? (\n            Array.from({ length: 4 }).map((_, i) => (\n              <div key={i} className=\"bg-white/10 backdrop-blur-xl rounded-2xl p-4 sm:p-6 border border-white/20 animate-pulse\">\n                <div className=\"h-4 w-24 bg-white/20 rounded mb-3\" />\n                <div className=\"h-8 w-20 bg-white/30 rounded\" />\n              </div>\n            ))\n          ) : (\n            [{\n              label: 'Total Users',\n              value: summary.totalUsers,\n              Icon: UsersIcon,\n              color: 'text-blue-400',\n            }, {\n              label: 'Active Users',\n              value: summary.activeUsers,\n              Icon: AnalyticsIcon,\n              color: 'text-green-400',\n            }, {\n              label: 'Calculations',\n              value: summary.totalCalculations,\n              Icon: AnalyticsIcon,\n              color: 'text-purple-400',\n            }, {\n              label: 'Exports',\n              value: summary.totalExports,\n              Icon: CodeIcon,\n              color: 'text-yellow-400',\n            }].map((c, idx) => (\n              <div key={idx} className=\"bg-white/10 backdrop-blur-xl rounded-2xl p-4 sm:p-6 border border-white/20\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-white/60 text-sm\">{c.label}</p>\n                    <p className=\"text-3xl font-bold text-white\">{c.value}</p>\n                  </div>\n                  <div className=\"p-3 bg-white/10 rounded-xl\">\n                    <c.Icon className={`${c.color}`} size={22} />\n                  </div>\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n\n        {/* Secondary Stats */}\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8 sm:mb-10\">\n          {loading ? (\n            Array.from({ length: 4 }).map((_, i) => (\n              <div key={i} className=\"bg-white/10 backdrop-blur-xl rounded-2xl p-4 sm:p-5 border border-white/20 animate-pulse\">\n                <div className=\"h-3 w-20 bg-white/20 rounded mb-2\" />\n                <div className=\"h-6 w-16 bg-white/30 rounded\" />\n              </div>\n            ))\n          ) : (\n            <>\n              <div className=\"bg-white/10 backdrop-blur-xl rounded-2xl p-4 sm:p-5 border border-white/20\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-white/60 text-xs\">Contacts</p>\n                    <p className=\"text-xl font-semibold text-white\">{summary.contacts}</p>\n                  </div>\n                  <div className=\"p-2.5 bg-white/10 rounded-xl\">\n                    <MessageSquareIcon className=\"text-pink-300\" size={18} />\n                  </div>\n                </div>\n              </div>\n              <div className=\"bg-white/10 backdrop-blur-xl rounded-2xl p-4 sm:p-5 border border-white/20\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-white/60 text-xs\">Open Chats</p>\n                    <p className=\"text-xl font-semibold text-white\">{summary.openChats}</p>\n                  </div>\n                  <div className=\"p-2.5 bg-white/10 rounded-xl\">\n                    <MessageSquareIcon className=\"text-emerald-300\" size={18} />\n                  </div>\n                </div>\n              </div>\n              <div className=\"bg-white/10 backdrop-blur-xl rounded-2xl p-4 sm:p-5 border border-white/20\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-white/60 text-xs\">Maintenance</p>\n                    <p className=\"text-xl font-semibold text-white\">{isMaintenance ? 'Enabled' : 'Disabled'}</p>\n                  </div>\n                  <div className=\"p-2.5 bg-white/10 rounded-xl\">\n                    <AnalyticsIcon className=\"text-yellow-300\" size={18} />\n                  </div>\n                </div>\n              </div>\n            </>\n          )}\n        </div>\n\n        {/* Two columns */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6\">\n          {/* Left: Activity */}\n          <div className=\"lg:col-span-2 bg-white/10 backdrop-blur-xl rounded-2xl p-4 sm:p-6 border border-white/20\">\n            <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-3 sm:mb-4\">\n              <h2 className=\"text-white font-semibold\">Recent Activity</h2>\n              <Link to=\"/admin/analytics\" className=\"text-white/70 hover:text-white text-sm underline\">View analytics</Link>\n            </div>\n            <div className=\"mb-3 sm:mb-4\">\n              <input\n                value={activityQuery}\n                onChange={(e) => setActivityQuery(e.target.value)}\n                placeholder=\"Search activity...\"\n                aria-label=\"Search recent activity\"\n                className=\"w-full px-3 py-2 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-400/40\"\n              />\n            </div>\n            <div className=\"space-y-3\">\n              {loading && (\n                <>\n                  {Array.from({ length: 6 }).map((_, i) => (\n                    <div key={i} className=\"h-10 bg-white/10 rounded-lg animate-pulse\" />\n                  ))}\n                </>\n              )}\n              {!loading && filteredActivity.length === 0 && (\n                <p className=\"text-white/60 text-sm\">No activity matches your search.</p>\n              )}\n              {!loading && filteredActivity.map((a) => (\n                <div key={a.id} className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 p-3 bg-white/5 rounded-lg\">\n                  <div className=\"flex items-center gap-3 min-w-0\">\n                    <div className={`w-2.5 h-2.5 ${a.color} rounded-full`} />\n                    <span className=\"text-white/80 text-sm truncate\">{a.description}</span>\n                  </div>\n                  <span className=\"text-white/50 text-xs\">{new Date(a.timestamp).toLocaleString()}</span>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Right: System & Quick Links */}\n          <div className=\"space-y-4 sm:space-y-6\">\n            <div className=\"bg-white/10 backdrop-blur-xl rounded-2xl p-4 sm:p-6 border border-white/20\">\n              <h3 className=\"text-white font-semibold mb-3\">System Status</h3>\n              <div className=\"space-y-2 text-sm\">\n                <div className=\"flex items-center justify-between text-white/80\"><span>Network</span><span className=\"text-white\">{(() => {\n                  try {\n                    const connection: any = (navigator as any).connection;\n                    const effective = connection?.effectiveType || 'unknown';\n                    const downlink = connection?.downlink ? `${connection.downlink}Mbps` : 'n/a';\n                    return `${effective} (${downlink})`;\n                  } catch {\n                    return 'unknown';\n                  }\n                })()}</span></div>\n                <div className=\"flex items-center justify-between text-white/80\"><span>Memory</span><span className=\"text-white\">{(() => {\n                  try {\n                    const memory: any = (window.performance as any)?.memory;\n                    return memory ? `${Math.round(memory.usedJSHeapSize / 1024 / 1024)}MB` : 'n/a';\n                  } catch {\n                    return 'n/a';\n                  }\n                })()}</span></div>\n                <div className=\"flex items-center justify-between text-white/80\"><span>Maintenance</span><span className=\"text-white\">{isMaintenance ? 'Enabled' : 'Disabled'}</span></div>\n                <div className=\"flex items-center justify-between text-white/80\"><span>Open Chats</span><span className=\"text-white\">{summary.openChats}</span></div>\n              </div>\n            </div>\n\n            <div className=\"bg-white/10 backdrop-blur-xl rounded-2xl p-4 sm:p-6 border border-white/20\">\n              <h3 className=\"text-white font-semibold mb-3\">Recent Messages</h3>\n              <div className=\"space-y-2\">\n                {recentMessages.length === 0 && <p className=\"text-white/60 text-sm\">No recent messages</p>}\n                {recentMessages.map((m) => (\n                  <div key={m.id} className=\"flex items-start justify-between gap-3 p-3 bg-white/5 rounded-lg\">\n                    <div className=\"min-w-0\">\n                      <div className=\"text-white text-sm truncate\">{m.name} • <span className=\"text-white/70\">{m.email}</span></div>\n                      <div className=\"text-white/80 text-sm truncate\">{m.subject}</div>\n                      <div className=\"text-white/50 text-xs\">{new Date(m.timestamp).toLocaleString()}</div>\n                    </div>\n                    {m.status !== 'read' && (\n                      <button\n                        onClick={() => { contactStorage.updateSubmissionStatus(m.id, 'read'); refreshAll(); }}\n                        className=\"text-xs px-2 py-1 rounded bg-white/10 hover:bg-white/20 border border-white/20 text-white\"\n                      >Mark read</button>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            <div className=\"bg-white/10 backdrop-blur-xl rounded-2xl p-4 sm:p-6 border border-white/20\">\n              <h3 className=\"text-white font-semibold mb-3\">Quick Actions</h3>\n              <div className=\"grid grid-cols-2 gap-3\">\n                <Link to=\"/admin/data\" className=\"px-3 py-2 bg-white/10 hover:bg-white/20 rounded-lg text-white text-sm text-center\">Manage Users</Link>\n                <Link to=\"/admin/chat\" className=\"px-3 py-2 bg-white/10 hover:bg-white/20 rounded-lg text-white text-sm text-center\">Open Chat</Link>\n                <button onClick={toggleMaintenance} className=\"px-3 py-2 bg-yellow-500/20 hover:bg-yellow-500/30 rounded-lg text-yellow-200 text-sm text-center border border-yellow-400/40\">{isMaintenance ? 'Disable' : 'Enable'} Maintenance</button>\n                <button onClick={refreshAll} className=\"px-3 py-2 bg-white/10 hover:bg-white/20 rounded-lg text-white text-sm text-center\">Refresh</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminDashboard;"],"names":["formatUpdatedAgo","lastUpdatedAt","diff","seconds","minutes","hours","AdminDashboard","isMenuOpen","setIsMenuOpen","useState","loading","setLoading","summary","setSummary","recentActivity","setRecentActivity","recentMessages","setRecentMessages","activityQuery","setActivityQuery","setLastUpdatedAt","isMaintenance","setIsMaintenance","loadSummary","allUsers","userManager","activeUsers","totalCalculations","sum","u","totalExports","contacts","contactStorage","openChats","_b","_a","chatSystem","s","err","loadRecentMessages","e","loadRecentActivity","items","now","m","idx","b","refreshAll","useEffect","onStorage","onContactsUpdated","onCustom","filteredActivity","useMemo","q","a","toggleMaintenance","next","jsxs","jsx","AdminMenu","Link","_","i","UsersIcon","AnalyticsIcon","CodeIcon","c","Fragment","MessageSquareIcon","connection","effective","downlink","memory"],"mappings":"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"}