import{m as M,j as e}from"./index-52440fcd.js";import{r as n}from"./vendor-fb33f09a.js";import{A as P}from"./AdminMenu-381e9601.js";import{c as v}from"./contactStorage-14a689f3.js";import{a as V}from"./router-c6dabb7d.js";import{a9 as F,t as B,U as J,M as j,w as U,ad as A,u as X,X as y,a5 as Y}from"./ui-027738c2.js";const Z=()=>{const E=V(),[o,C]=n.useState([]),[m,w]=n.useState([]),[h,k]=n.useState("users"),[S,O]=n.useState(!1),[l,u]=n.useState(null),[s,c]=n.useState(null),[$,f]=n.useState(!1),[R,x]=n.useState(!1),[L,g]=n.useState(!1),[p,b]=n.useState("");n.useEffect(()=>{D();const t=()=>D();return window.addEventListener("contact_submissions_updated",t),()=>window.removeEventListener("contact_submissions_updated",t)},[]);const D=()=>{try{const i=M.getAllUsers().map(r=>({id:r.id,name:r.name,email:r.email,totalCalculations:r.totalCalculations,totalExports:r.totalExports,lastActive:new Date(Date.now()-Math.random()*7*24*60*60*1e3).toISOString(),status:Math.random()>.3?"active":"inactive"})),a=v.getSubmissions().map(r=>({...r,date:r.timestamp}));C(i),w(a)}catch(t){console.error("Failed to load data:",t)}},z=(t,i)=>{const a=o.find(r=>r.id===i);if(a)switch(t){case"view":u(a),f(!0);break;case"delete":u(a),x(!0);break}},N=(t,i)=>{const a=m.find(r=>r.id===i);if(a)switch(t){case"view":c(a),f(!0);break;case"reply":c(a),b(""),g(!0);break;case"delete":c(a),x(!0);break}},I=()=>{if(!l)return;const i=M.getAllUsers().filter(a=>a.id!==l.id);localStorage.setItem("registered_users",JSON.stringify(i)),C(o.filter(a=>a.id!==l.id)),x(!1),u(null)},T=()=>{s&&(v.deleteSubmission(s.id),w(t=>t.filter(i=>i.id!==s.id)),x(!1),c(null))},_=()=>{!s||!p.trim()||(v.updateSubmissionStatus(s.id,"replied"),w(t=>t.map(i=>i.id===s.id?{...i,status:"replied"}:i)),console.log(`Reply to ${s.email}: ${p}`),g(!1),c(null),b(""))},d=()=>{f(!1),x(!1),g(!1),u(null),c(null),b("")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:[e.jsx(P,{isOpen:S,onToggle:()=>O(!S)}),e.jsx("div",{className:"bg-white/10 backdrop-blur-xl border-b border-white/20 lg:ml-64",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("button",{onClick:()=>E("/admin"),className:"flex items-center space-x-2 text-white/80 hover:text-white transition-colors",children:[e.jsx(F,{size:20}),e.jsx("span",{children:"Back to Dashboard"})]})}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center space-x-2",children:[e.jsx(B,{size:28}),e.jsx("span",{children:"Data Management"})]})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 lg:ml-64",children:[e.jsxs("div",{className:"flex space-x-1 bg-white/10 backdrop-blur-xl rounded-xl p-1 mb-8",children:[e.jsxs("button",{onClick:()=>k("users"),className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-all ${h==="users"?"bg-white/20 text-white shadow-lg":"text-white/60 hover:text-white"}`,children:[e.jsx(J,{size:20}),e.jsxs("span",{children:["Users (",o.length,")"]})]}),e.jsxs("button",{onClick:()=>k("contacts"),className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-all ${h==="contacts"?"bg-white/20 text-white shadow-lg":"text-white/60 hover:text-white"}`,children:[e.jsx(j,{size:20}),e.jsxs("span",{children:["Contacts (",m.length,")"]})]})]}),h==="users"&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-6",children:"User Management"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/20",children:[e.jsx("th",{className:"text-left py-3 px-4 text-white/80 font-medium",children:"User"}),e.jsx("th",{className:"text-left py-3 px-4 text-white/80 font-medium",children:"Email"}),e.jsx("th",{className:"text-left py-3 px-4 text-white/80 font-medium",children:"Calculations"}),e.jsx("th",{className:"text-left py-3 px-4 text-white/80 font-medium",children:"Exports"}),e.jsx("th",{className:"text-left py-3 px-4 text-white/80 font-medium",children:"Last Active"}),e.jsx("th",{className:"text-left py-3 px-4 text-white/80 font-medium",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 text-white/80 font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:o.map(t=>e.jsxs("tr",{className:"border-b border-white/10 hover:bg-white/5",children:[e.jsx("td",{className:"py-3 px-4 text-white",children:t.name}),e.jsx("td",{className:"py-3 px-4 text-white/80",children:t.email}),e.jsx("td",{className:"py-3 px-4 text-white/80",children:t.totalCalculations}),e.jsx("td",{className:"py-3 px-4 text-white/80",children:t.totalExports}),e.jsx("td",{className:"py-3 px-4 text-white/80",children:new Date(t.lastActive).toLocaleDateString()}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.status==="active"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:t.status})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>z("view",t.id),className:"p-1 text-blue-400 hover:text-blue-300 transition-colors",title:"View Details",children:e.jsx(U,{size:16})}),e.jsx("button",{onClick:()=>z("delete",t.id),className:"p-1 text-red-400 hover:text-red-300 transition-colors",title:"Delete User",children:e.jsx(A,{size:16})})]})})]},t.id))})]})})]}),h==="contacts"&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-6",children:"Contact Messages"}),e.jsxs("div",{className:"space-y-4",children:[m.map(t=>e.jsx("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"text-white font-medium",children:t.name}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.status==="new"?"bg-blue-500/20 text-blue-400":t.status==="read"?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:t.status})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-white/60 mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(j,{size:14}),e.jsx("span",{children:t.email})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(X,{size:14}),e.jsx("span",{children:new Date(t.date||t.timestamp).toLocaleDateString()})]})]}),e.jsx("p",{className:"text-white/80 text-sm",children:t.message})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>N("view",t.id),className:"p-2 text-blue-400 hover:text-blue-300 transition-colors",title:"View Details",children:e.jsx(U,{size:16})}),e.jsx("button",{onClick:()=>N("reply",t.id),className:"p-2 text-green-400 hover:text-green-300 transition-colors",title:"Reply",children:e.jsx(j,{size:16})}),e.jsx("button",{onClick:()=>N("delete",t.id),className:"p-2 text-red-400 hover:text-red-300 transition-colors",title:"Delete",children:e.jsx(A,{size:16})})]})]})},t.id)),m.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(j,{className:"mx-auto text-white/40",size:48}),e.jsx("p",{className:"text-white/60 mt-2",children:"No contact messages yet"})]})]})]})]}),$&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4",onClick:d,children:e.jsxs("div",{className:"relative bg-gradient-to-br from-white/15 to-white/5 backdrop-blur-xl rounded-3xl p-6 border border-white/30 max-w-md w-full mx-4 shadow-2xl",onClick:t=>t.stopPropagation(),children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 via-purple-500/5 to-indigo-500/10 rounded-3xl"}),e.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-32 h-32 bg-blue-500/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-24 h-24 bg-purple-500/20 rounded-full blur-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Details"}),e.jsx("button",{onClick:d,className:"text-white/60 hover:text-white transition-colors",children:e.jsx(y,{size:20})})]}),e.jsxs("div",{className:"space-y-4 text-white",children:[l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-white/60 text-sm",children:"Name"}),e.jsx("p",{className:"text-white font-medium",children:l.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-white/60 text-sm",children:"Email"}),e.jsx("p",{className:"text-white font-medium",children:l.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-white/60 text-sm",children:"Calculations"}),e.jsx("p",{className:"text-white font-medium",children:l.totalCalculations})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-white/60 text-sm",children:"Exports"}),e.jsx("p",{className:"text-white font-medium",children:l.totalExports})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-white/60 text-sm",children:"Last Active"}),e.jsx("p",{className:"text-white font-medium",children:new Date(l.lastActive).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-white/60 text-sm",children:"Status"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l.status==="active"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:l.status})]})]}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-white/60 text-sm",children:"Name"}),e.jsx("p",{className:"text-white font-medium",children:s.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-white/60 text-sm",children:"Email"}),e.jsx("p",{className:"text-white font-medium",children:s.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-white/60 text-sm",children:"Phone"}),e.jsx("p",{className:"text-white font-medium",children:s.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-white/60 text-sm",children:"Date"}),e.jsx("p",{className:"text-white font-medium",children:new Date(s.date||s.timestamp).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-white/60 text-sm",children:"Status"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.status==="new"?"bg-blue-500/20 text-blue-400":s.status==="read"?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:s.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-white/60 text-sm",children:"Message"}),e.jsx("p",{className:"text-white font-medium",children:s.message})]})]})]})]})]})}),R&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4",onClick:d,children:e.jsxs("div",{className:"relative bg-gradient-to-br from-white/15 to-white/5 backdrop-blur-xl rounded-3xl p-6 border border-white/30 max-w-md w-full mx-4 shadow-2xl",onClick:t=>t.stopPropagation(),children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-500/10 via-purple-500/5 to-blue-500/10 rounded-3xl"}),e.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-32 h-32 bg-red-500/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-24 h-24 bg-blue-500/20 rounded-full blur-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Confirm Delete"}),e.jsx("button",{onClick:d,className:"text-white/60 hover:text-white transition-colors",children:e.jsx(y,{size:20})})]}),e.jsxs("div",{className:"text-white mb-6",children:[e.jsxs("p",{children:["Are you sure you want to delete this ",l?"user":"contact","?"]}),e.jsx("p",{className:"text-white/60 mt-2",children:l?`${l.name} (${l.email})`:s?`${s.name} (${s.email})`:""})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:l?I:T,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors",children:"Delete"}),e.jsx("button",{onClick:d,className:"bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})]})}),L&&s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4",onClick:d,children:e.jsxs("div",{className:"relative bg-gradient-to-br from-white/15 to-white/5 backdrop-blur-xl rounded-3xl p-6 border border-white/30 max-w-md w-full mx-4 shadow-2xl",onClick:t=>t.stopPropagation(),children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/10 via-purple-500/5 to-blue-500/10 rounded-3xl"}),e.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-32 h-32 bg-green-500/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-24 h-24 bg-purple-500/20 rounded-full blur-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Reply to Contact"}),e.jsx("button",{onClick:d,className:"text-white/60 hover:text-white transition-colors",children:e.jsx(y,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-white/60 text-sm",children:"To"}),e.jsxs("p",{className:"text-white font-medium",children:[s.name," (",s.email,")"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-white/60 text-sm",children:"Original Message"}),e.jsx("p",{className:"text-white/80 text-sm bg-white/5 p-3 rounded-lg",children:s.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-white/60 text-sm",children:"Your Reply"}),e.jsx("textarea",{value:p,onChange:t=>b(t.target.value),placeholder:"Type your reply message...",rows:4,className:"w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsxs("button",{onClick:_,disabled:!p.trim(),className:"flex items-center space-x-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-500 text-white px-4 py-2 rounded-lg transition-colors",children:[e.jsx(Y,{size:16}),e.jsx("span",{children:"Send Reply"})]}),e.jsx("button",{onClick:d,className:"bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg transition-colors",children:"Cancel"})]})]})]})]})})]})};export{Z as default};
//# sourceMappingURL=AdminData-c5987dfb.js.map
